<!-- <div class='star-wizard-button-wrapper'>
  <div mno-star-wizard=true modal-open='starWizardModal.value'></div>
  <a class='star-button hidden-sm hidden-xs btn btn-promo btn-success' ng-click='openStarWizard()'>
    <span class='fa fa-upload'></span>
    Data Upload Wizard
  </a>
</div> -->

<h2 class="section-title">
  Dashboard
</h2>

<div class="spacer2"></div>

<div ng-switch="loading">
  <div ng-switch-when='true'>
    <div class='align-center'>
      <img ng-src="{{assetPath['mno_enterprise/loader-32x32-bg-main.gif']}}">
    </div>
  </div>

  <div ng-switch-default>
    <div class='row'>
      <div ng-repeat="app in apps" class='col-md-3'>
        <div class='app-dashboard'>

          <!-- Backface -->
          <div ng-switch="displayOptions[app.id]">

            <div ng-switch-when="true">
              <div ng-init="openModal = 0" dashboard-plan-change-request=true app-id="{{app.id}}" open-modal="openModal"></div>
              <div ng-init="deletionModal = 0" dashboard-app-deletion-request=true app-id="{{app.id}}" open-modal="deletionModal"></div>
              <a ng-click="displayOptions[app.id] = !displayOptions[app.id]" ng-show="helper.displayCogwheel()" class="options" href=""><i class="fa fa-times"></i></a>

              <!-- Data Sync Button -->
              <div ng-show="appsListHelper.isDataSyncShown(app)">
                <br>
                <a class="btn btn-info" href="{{ appsListHelper.dataSyncPath(app) }}" mno-helptext="Trigger a manual sync between {{app.appName}} and Maestrano.">Manual Data Sync</a>
              </div>

              <!-- Data Disconnect Button -->
              <div ng-show="appsListHelper.isDataDisconnectShown(app)">
                <br>
                <a class="btn btn-danger" ng-really-message="Are you sure you want to disconnect {{app.appName}} and Maestrano?" ng-really-click="appsListHelper.dataDisconnectClick(app)" href="" mno-helptext="Disconnect the link between {{app.appName}} and Maestrano.">Disconnect Link</a>
              </div>
              <br>
              <div>
                <br>
                <button ng-click="restartApp.perform(app.id)" ng-show="helper.canRestartApp() && appsListHelper.isRestartShown(app)" ng-disabled="restartApp.loading" class="btn">Restart</button>
                <button ng-click="deletionModal = deletionModal + 1" ng-show="helper.canDeleteApp()" class="btn btn-danger">Delete</button>
              </div>
            </div>

            <!-- Frontface -->
            <div ng-switch-default>
              <a ng-click="displayOptions[app.id] = !displayOptions[app.id]" ng-show="helper.displayCogwheel()" class="options" href=""><i class="fa fa-cog"></i></a>
              <br>
              <a ng-href="{{appsListHelper.appActionUrl(app)}}" target="_blank">
                <img class="app-logo" ng-src="{{app.logo}}">
              </a>
              <br>
              <div editable-text="app.name" onaftersave="updateAppName(app)" class='title' style="border:0px;">{{app.name}}</div>

              <!-- Connected company name -->
              <div ng-show="appsListHelper.companyName(app)">
                <div class='app-line' style="border:0px;" tooltip="{{appsListHelper.companyName(app)}}">
                  Linked to: {{ appsListHelper.companyName(app) | truncate:25 }}
                </div>
              </div>

              <!-- Connector Version -->
              <div ng-show="appsListHelper.connectorVersion(app)">
                <div class='app-line' style="border:0px;">MYOB Version: {{appsListHelper.connectorVersion(app)}}</div>
              </div>

              <!-- OAuth Connect Button -->
              <div ng-show="appsListHelper.isOauthConnectBtnShown(app)">
                <a class="btn btn-warning" ng-href="{{appsListHelper.oAuthConnectPath(app)}}">
                  Connect
                </a>
              </div>

              <a ng-href="{{appsListHelper.appActionUrl(app)}}" target="_blank" ng-hide="appsListHelper.isLaunchHidden(app)" class="btn btn-warning">Launch App</a>

              <span ng-show="app.status == 'terminating' || app.status == 'terminated'">(deleted)</span>
              <br>
              <a ng-show="app.tutorial" ng-href="{{app.tutorial}}" class='tutorial' target="_blank">Tutorials</a>
            </div>
          </div>
        </div>
      </div>
      <div class='col-md-3'>
        <div class='app-dashboard add-app'>
          <a href="#/marketplace">
            <div class="fa fa-plus-circle"></div>
          </a>
        </div>
      </div>
    </div>
    <div class='spacer2'></div>
    <div dashboard-bootstrap-wizard='true' ng-show='helper.displayBootstrapWizard()'></div>
  </div>
</div>
